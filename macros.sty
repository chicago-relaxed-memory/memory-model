%\newcommand{\amsqed}{\tag*{\QEDSYMBOL}\NoEndMark}

\newcommand{\fsat}{\mathsf{sat}}
\newcommand{\ID}[1]{[#1]}
\newcommand{\IDLoc}{[\Loc]}
\newcommand{\IDAcq}{\ID{\Acq}}
\newcommand{\IDRel}{\ID{\Rel}}
\newcommand{\IDR}{\ID{\mathsf{R}}}
\newcommand{\IDW}{\ID{\mathsf{W}}}


%\newcommand{\eqdef}{\mathrel{\smash{\overset{\scriptscriptstyle\vartriangle}{=}}}}
\newcommand{\eqdef}{=}
\newcommand{\rel}{{\tt rel}}


\newcommand{\acylic}{\mathit{acyclic}}
\newcommand{\pomspace}{{\cal P}}

\newcommand{\feco}{\mathit{eco}}

\newcommand{\reads}{\mathit{Reads}}
\newcommand{\Seq}{{\tt Sequential}}

\newcommand{\writes}{\mathit{Writes}}
\newcommand{\pomf}[1]{Fun_{#1}}
\newcommand{\pomFn}{\mathit{PomFn}}
\newcommand{\power}{\mathcal{P}}
\newcommand{\aFn}{F}
\newcommand{\aRSet}{R}
\newcommand{\bRSet}{S}
\newcommand{\aWSet}{U}
\newcommand{\bWSet}{V}
\newcommand{\aWrite}{\aAct_w}
\newcommand{\bPS}{\aPS'}
\newcommand{\cPS}{\aPS_1}
\newcommand{\dPS}{\aPS'_1}
\newcommand{\after}{\mathrel{\mathsf{after}}}
\newcommand{\size}{\mathsf{size}}

\newcommand{\test}[1]{\overline{#1}}
\newcommand{\testP}[2]{{\tt test}^{#1}_{#2}}
\newcommand{\hole}[1]{[#1]}
\newcommand{\freshaval}{\aVal_{{\tt fr}}}

\newcommand{\drfsc}{{\sc drf-sc}}
\newcommand{\oota}{{\sc oota}}
\newcommand{\tso}{{\sc tso}}
\newcommand{\armseven}{{\sc armv7}}
\newcommand{\armeight}{{\sc armv8}}
\newcommand{\ppc}{{\sc power}}
\newcommand{\mca}{{\sc mca}}





\newcommand{\rar}{\mathrel{\mathsf{ar}}}
\newcommand{\muIMM}{\ensuremath{\mu\text{IMM}}}
\newcommand{\free}{\mathsf{fn}}
\newenvironment{displaymatharray}[1]{\begin{displaymath}\begin{array}{#1}\ignorespaces}{\end{array}\end{displaymath}\ignorespacesafterend}
\newenvironment{displaymatharrayl}{\begin{displaymatharray}{l}\ignorespaces}{\end{displaymatharray}\ignorespacesafterend}
\newenvironment{displaymatharrayrl}{\begin{displaymatharray}{r>{\ }l}\ignorespaces}{\end{displaymatharray}\ignorespacesafterend}
\newenvironment{sdisplaymatharray}[1]{\small\begin{displaymatharray}{#1}\ignorespaces}{\end{displaymatharray}\ignorespacesafterend}
\newenvironment{sdisplaymatharrayl}{\small\begin{displaymatharrayl}\ignorespaces}{\end{displaymatharrayl}\ignorespacesafterend}
\newenvironment{sdisplaymatharrayrl}{\small\begin{displaymatharrayrl}\ignorespaces}{\end{displaymatharrayrl}\ignorespacesafterend}
\newenvironment{displaymathsmall}{\bgroup\small\begin{displaymath}\ignorespaces}{\end{displaymath}\egroup\ignorespacesafterend}
\newenvironment{equationsmall}{\bgroup\small\begin{equation}\ignorespaces}{\end{equation}\egroup\ignorespacesafterend}
\newenvironment{scope}{\bgroup\ignorespaces}{\egroup\ignorespacesafterend}
\newenvironment{tikzinline}[1][]{\bgroup\small\begin{math}\begin{tikzpicture}[baselinecenter,#1]\ignorespaces}{\end{tikzpicture}\end{math}\egroup}
\newenvironment{tikzdisplaylabel}[2][]{\bgroup\small\begin{equation}\label{#2}\begin{tikzpicture}[baselinecenter,#1]\ignorespaces}{\end{tikzpicture}\end{equation}\egroup\ignorespacesafterend}
\newenvironment{tikzdisplay}[1][]{\bgroup\small\begin{displaymath}\begin{tikzpicture}[baselinecenter,#1]\ignorespaces}{\end{tikzpicture}\end{displaymath}\egroup\ignorespacesafterend}
\newenvironment{tikzcenter}[1][]{\begin{tikzpicture}[baselinecenter,#1]\ignorespaces}{\end{tikzpicture}}
\newcommand{\fdom}{\mathsf{domain}}
\newcommand{\fcodom}{\mathsf{codomain}}
\newcommand{\semClosed}[1]{\closed\sem{#1}}
\newcommand{\closed}{\textsf{closed}}
\newcommand{\addRead}{\textsf{addRead}}
\newcommand{\pLTL}{\textsf{PLTL}}
\newcommand{\once}{\Diamond^{-1}}
\newcommand{\always}{\Box^{-1}}
\newcommand{\afo}{\phi}
\newcommand{\bfo}{\psi}
\newcommand{\mods}{\textsf{Models}}

\newcommand{\eqorder}{\sim}
\newcommand{\suborder}{\sqsubseteq}
\newcommand{\inj}{f}
\newcommand{\hoare}[3]{\{#1\}\;#2\;\{#3\}}
\newcommand{\fwp}{\textit{wp}}

\newcommand{\aF}{\xi}
\newcommand{\FA}{\mathsf{A}}
\newcommand{\FR}{\mathsf{R}}
\newcommand{\FF}{\mathsf{F}}
%\newcommand{\FID}[1]{[\DF{#1}]}

\newcommand{\xinit}{\mathsf{init}}
\newcommand{\BNFSEP}{\ensuremath{\;\mathrel{|}\;}}
\newcommand{\BNFDEF}{\ensuremath{\;\mathrel{\mathord{\vcentcolon}\mkern-1mu\mathord{\vcentcolon}\mathord{{=}}}\;}}

\newcommand{\restrict}[1]{\mathbin{|}_{#1}}
\newcommand{\textand}{\;\allowbreak\text{and}\allowbreak\;}
\newcommand{\textif}{\;\allowbreak\text{if}\allowbreak\;}
\newcommand{\textimplies}{\; \allowbreak\text{implies}\allowbreak\;}
\newcommand{\textor}{\; \allowbreak\text{or}\allowbreak\;}

\newcommand{\fpox}{\mathit{po}}
\newcommand{\fird}{\mathit{ird}}
\newcommand{\TIKZ}[2][]{\left\{\,\begin{tikzpicture}[baselinecenter,node distance=1em,#1]#2\end{tikzpicture}\,\right\}}
\newcommand{\fork}{\setminus_{\mathsf{S}}}

\newcommand{\refapp}[1]{Appendix~\ref{app:#1}}

\newenvironment{noenv}{\ignorespaces}{\ignorespacesafterend}
\newcommand{\aCmd}{C}
\newcommand{\bCmd}{D}
\newcommand{\eCmd}{E}

\newcommand{\ifnotempty}[2]{\ifx\relax#1\relax\else#2\fi}
\newcommand{\ifnotemptyelse}[3]{\ifx\relax#1\relax#3\else#2\fi}
\newcommand{\ifemptyelse}[3]{\ifx\relax#1\relax#2\else#3\fi}

\newcommand{\dontcare}{\texttt{\_}}
\newcommand{\pair}[2]{\langle#1,\,#2\rangle}
% \newcommand{\freads}{\mathsf{reads}}
% \newcommand{\fwrites}{\mathsf{writes}}
\newcommand{\rreads}{\mathsf{Reads}}
\newcommand{\rwrites}{\mathsf{Writes}}
\newcommand{\finternalize}{\mathsf{internalize}}

\newcommand{\Sub}{\mathcal{S}}
\newcommand{\aSub}{\sigma}
\newcommand{\bSub}{\rho}

\newcommand{\Reg}{\mathcal{R}}
\newcommand{\aReg}{r}
\newcommand{\bReg}{s}

\newcommand{\LR}{\mathcal{L}}
\newcommand{\aLR}{\ell}

\newcommand{\Loc}{\mathcal{X}}
\newcommand{\aLoc}{x}
\newcommand{\bLoc}{y}
\newcommand{\cLoc}{z}

\newcommand{\LVal}{\mathcal{L}}
\newcommand{\aLV}{\ell}
\newcommand{\bLV}{k}

\newcommand{\Val}{\mathcal{V}}
\newcommand{\aVal}{v}
\newcommand{\bVal}{w}
\newcommand{\cVal}{\ell}
\newcommand{\dVal}{u}

\newcommand{\Exp}{\mathcal{E}}
\newcommand{\aExp}{M}
\newcommand{\bExp}{N}
\newcommand{\cExp}{L}
\newcommand{\dExp}{K}
\newcommand{\aEExp}{\mathbb{M}}
\newcommand{\bEExp}{\mathbb{N}}

\newcommand{\Formulae}{\Phi}
\newcommand{\aForm}{\phi}
\newcommand{\bForm}{\psi}
\newcommand{\cForm}{\chi}
\newcommand{\dForm}{\xi}
\newcommand{\TRUE}{\mathsf{true}}
\newcommand{\FALSE}{\mathsf{false}}

\newcommand{\Int}{\mathsf{Internal}}
\newcommand{\Ext}{\mathsf{External}}
\newcommand{\Rel}{\mathsf{Release}}
\newcommand{\Acq}{\mathsf{Acquire}}
\newcommand{\Act}{\mathcal{A}}
\newcommand{\aActSub}{\alpha}
\newcommand{\bActSub}{\beta}

\newcommand{\aAct}{a}
\newcommand{\bAct}{b}
\newcommand{\cAct}{c}
\newcommand{\dAct}{d}
\newcommand{\DRAcq}[2]{\smash{\mathsf{R^{acq}}\ifnotempty{#1}{\,#1\ifnotempty{#2}{\,#2}}}}
\newcommand{\DWRel}[2]{\smash{\mathsf{W^{rel}}\ifnotempty{#1}{\,#1\ifnotempty{#2}{\,#2}}}}
\newcommand{\DR}[2]{\mathsf{R}\ifnotempty{#1}{\,#1\ifnotempty{#2}{\,#2}}}
\newcommand{\DW}[2]{\mathsf{W}\ifnotempty{#1}{\,#1\ifnotempty{#2}{\,#2}}}
\newcommand{\DF}[1][\mathsf{acqrel}]{\mathsf{F}^{#1}}
\newcommand{\iDRAcq}[2]{\mathsf{\tau ^{acq}}\ifnotempty{#1}{\,#1\ifnotempty{#2}{\,#2}}}
\newcommand{\iDWRel}[2]{\mathsf{\tau ^{rel}}\ifnotempty{#1}{\,#1\ifnotempty{#2}{\,#2}}}
\newcommand{\iDR}[2]{\mathsf{\tau }\ifnotempty{#1}{\,#1\ifnotempty{#2}{\,#2}}}
\newcommand{\iDW}[2]{\mathsf{\tau }\ifnotempty{#1}{\,#1\ifnotempty{#2}{\,#2}}}
%\newcommand{\iDF}[1]{\mathsf{\tau F}_{#1}}

\newcommand{\DSB}{\mathsf{SB}}
\newcommand{\DT}[1]{\mathsf{T}\ifnotempty{#1}{\,#1}}
\newcommand{\DB}[1]{\mathsf{B}\ifnotempty{#1}{\,#1}}
\newcommand{\DC}[1]{\mathsf{C}\ifnotempty{#1}{\,#1}}

\newcommand{\EAct}{A}
\newcommand{\ESub}{S}
\newcommand{\Event}{E}
\newcommand{\aEv}{e}
\newcommand{\bEv}{d}
\newcommand{\cEv}{c}
\newcommand{\cEvs}{C}
\newcommand{\begEv}{b}
\newcommand{\comEv}{c}
%\newcommand{\ltN}{\mathrel{{\color{blue}\,\mid\!\!\!<}}}
\newcommand{\lessdoteq}{\mathrel{\raisebox{-.7ex}{$\mkern1mu\mathord{\relbar}$}\mkern-13mu\mathord{\lessdot}}}
\newcommand{\gtN}{\mathrel{{\color{orange!90!black}\lessdoteq}}}
\newcommand{\geN}{\mathrel{{\color{orange!90!black}\lessdot}}}
%\newcommand{\gtN}{\mathrel{{\color{blue}\mkern4mu\mid\!\!\!>}}}
\renewcommand{\le}{\mathrel{{\color{blue}\leq}}}
\newcommand{\lt}{\mathrel{{\color{blue}<}}}

\newcommand{\Alphabet}{\Sigma}
\newcommand{\labeling}{\lambda}
\newcommand{\labelingForm}{\lambda_{\Formulae}}
\newcommand{\labelingAct}{\lambda_{\Act}}

\newcommand{\RF}{\mathsf{RF}}

\newcommand{\NEVER}[1]{\rlap{$\times$}#1}

\newcommand{\partialfun}{\mathbin\rightharpoonup}
\newcommand{\fun}{\mathbin\rightarrow}
\newcommand{\prefix}{\mathbin\Rightarrow}
\newcommand{\sequence}{\mathbin;}
\newcommand{\guard}{\mathbin\rhd}
\newcommand{\st}{\mathbin.}

\newcommand{\aPS}{P}
\newcommand{\aPSS}{\mathcal{P}}
%\newcommand{\bPS}{Q}
\newcommand{\bPSS}{\mathcal{Q}}

\newcommand{\SC}{\mathsf{SC}}
\newcommand{\sem}[1]{\llbracket#1\rrbracket}
\newcommand{\semsc}[1]{\llbracket#1\rrbracket_{\SC}}
%\newcommand{\semsc}[1]{\textit{SC}\llbracket#1\rrbracket}
\newcommand{\REL}{^{\mathsf{rel}}}
\newcommand{\ACQ}{^{\mathsf{acq}}}
\newcommand{\FENCE}{\texttt{fence}}
\newcommand{\BEGIN}{\texttt{begin}}
\newcommand{\COMMIT}{\texttt{commit}}
\newcommand{\RECOVERY}{\texttt{onabort}\texttt{\{}}
\newcommand{\ENDREC}{\texttt{\}}}
\newcommand{\NEW}{\texttt{new}\,}
\newcommand{\NULL}{\texttt{null}}
\newcommand{\BEGINVAL}{\BEGIN\,\aVal}
\newcommand{\COMMITVAL}{\COMMIT\,\aVal}
\newcommand{\RECOVERYVAL}{\texttt{onabort}\,\aVal\texttt{\{}}
\newcommand{\END}{\texttt{end}}
\newcommand{\SKIP}{\texttt{skip}}
\newcommand{\GETS}{\texttt{:}\mkern-1mu\texttt{=}\,}
\newcommand{\SEQ}{\texttt{;}\,}
\newcommand{\SEMI}{\texttt{;}\,}
\newcommand{\IF}[1]{\texttt{if}\allowbreak\texttt{(}#1\texttt{)}}
\newcommand{\PASS}{\texttt{pass}}
\newcommand{\WHILE}{\texttt{while}\,}
\newcommand{\DO}[1]{\texttt{do}\texttt{\{}#1\texttt{\}}}
\newcommand{\THEN}{\allowbreak\texttt{\{}}
\newcommand{\ELSE}{\texttt{\}}\,\allowbreak\texttt{else}\allowbreak\,\texttt{\{}}
\newcommand{\ELIF}[1]{\ELSE\IF{#1}}
\newcommand{\brELSE}{\texttt{\}}\\\texttt{else}\,\texttt{\{}}
\newcommand{\brELIF}[1]{\texttt{\}}\\\texttt{else}\,\IF{#1}}
\newcommand{\FI}{\texttt{\}}}
\newcommand{\PAR}{\,\mathbin{\|}\,}
\newcommand{\LPAR}{\,\mathbin{\rrceil}\,}
\newcommand{\VAR}{\texttt{var}\,}
\newcommand{\TOUCHED}{\texttt{touched}\,}
\newcommand{\REF}[1]{\texttt{[}#1\texttt{]}}
\newcommand{\REFAcq}[1]{\REF{#1}^{\texttt{acq}}}
\newcommand{\REFRel}[1]{\REF{#1}^{\texttt{rel}}}

\newcommand{\CANREAD}{\texttt{canRead}}
\newcommand{\SEC}{\texttt{SECRET}}
\newcommand{\RETURN}{\texttt{return}\,}
\newcommand{\BARRIER}{\texttt{barrier}}

\newcommand{\EQ}{\,\texttt{=}\,}
\newcommand{\NOTEQ}{\,\texttt{!=}\,}

\newcommand{\GCC}{\texttt{gcc}}
\newcommand{\CLANG}{\texttt{clang}}

\usepackage{xparse}
\usepackage[T1]{fontenc}
\usepackage{alltt}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{hyperref}
\usepackage{makecell}
\usepackage{mathtools}
\usepackage{stmaryrd}
\usepackage{verbatim}

\theoremstyle{acmdefinition}
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{proposition}[theorem]{Proposition}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\usepackage{tikz}
\usetikzlibrary{shapes}
\usetikzlibrary{shapes.misc}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{topaths}
\usetikzlibrary{arrows}
\usetikzlibrary{positioning}
\usetikzlibrary{matrix}
\usetikzlibrary{fit}
\usetikzlibrary{calc}

\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}

\pgfsetlayers{background,main,foreground}

%\tikzset{baselinecenter/.style= {baseline=([yshift=-1ex]current bounding box.west)} }
\tikzstyle{baselinecenter} = [baseline={([yshift=-.5ex]current bounding box.west)}]
%\tikzstyle{baselinecenter} = [baseline=(current bounding box.west)]
\tikzstyle{event} = [draw=black, fill=blue!10, rectangle, rounded corners, minimum size=3ex]
\newcommand{\event}[3]{\node[event](#1)[#3]{$\mathstrut#2$};}
\tikzstyle{zlbl} = [black]
\newcommand{\@zz}[1]{\makebox[0ex]{\smash{\raisebox{-.5ex}{{${#1}{:}\;$}}}}}
\newcommand{\eventl}[4]{\node[event](#2)[#4,label={[zlbl]left:\@zz{#1}}]{$\mathstrut#3$};}
\newcommand{\eventr}[4]{\node[event](#2)[#4,label={[zlbl]right:\@zz{#1}}]{$\mathstrut#3$};}
\tikzstyle{internal} = [color=gray, draw=gray, dashed, fill=gray!10, rectangle, rounded corners, minimum size=3ex]
\newcommand{\internal}[3]{\node[internal](#1)[#3]{$\mathstrut#2$};}
\tikzstyle{cloudy} = [draw=black, fill=blue!10, cloud, aspect=2]
\newcommand{\cloud}[3]{\node[cloudy](#1)[#3]{$\mathstrut#2$};}
\tikzstyle{final} = [draw=black, fill=blue!10, rectangle, rounded corners, double, minimum size=3ex]
\newcommand{\final}[3]{\node[final](#1)[#3]{$\mathstrut#2$};}
\tikzset{nonevent/.style={
        event, 
        append after command={
            node [
                fit=(\tikzlastnode),
                draw=red!50!black,
                thick,
                inner sep=-2\pgflinewidth,
                cross out
            ] {}
        }
    }
}
\newcommand{\nonevent}[3]{\node[nonevent](#1)[#3]{$\mathstrut#2$};}
\tikzstyle{race} = [-,thick,decorate,decoration={zigzag,segment length = 0.2cm, amplitude = 0.5mm},color=orange!90!black]
\newcommand{\race}[3][]{\begin{pgfonlayer}{background}\draw[race,#1](#2) to (#3);\end{pgfonlayer}}

\tikzstyle{po} = [->,color=blue,]
\newcommand{\po}[3][]{\draw[po,#1](#2)to(#3);}
\newcommand{\xpo}{\xarrowtikz{po}{}}%
\tikzstyle{lift} = [->,double]
\newcommand{\lift}[3][]{\draw[lift,#1](#2)to(#3);}
\tikzstyle{wk} = [->,dashed,color=orange!90!black,]
\newcommand{\wk}[3][]{\draw[wk,#1](#2)to(#3);}
\newcommand{\xwk}{\xarrowtikzlong{wk}{}}%

\tikzstyle{rmw} = [->,thick]
\NewDocumentCommand \rmw {O{} m O{} m} {\draw[rmw,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{rmw}$}  (#4);}
\newcommand{\rrmw}{\ensuremath{\mathrel{\mathsf{rmw}}}}%
\newcommand{\xrmw}{\xarrowtikz{rmw}{rmw}}%

\tikzstyle{eco} = [->,color=orange!90!black,thick]
\NewDocumentCommand \eco {O{} m O{} m} {\draw[eco,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{eco}$}  (#4);}
\newcommand{\reco}{\ensuremath{\mathrel{\color{orange!90!black}\mathsf{eco}}}}%
\newcommand{\xeco}{\xarrowtikz{eco}{eco}}%
\tikzstyle{co} = [->,color=orange!90!black,thick]
\NewDocumentCommand \co {O{} m O{} m} {\draw[co,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{co}$}  (#4);}
\newcommand{\rco}{\ensuremath{\mathrel{\color{orange!90!black}\mathsf{co}}}}%
\newcommand{\xco}{\xarrowtikz{co}{co}}%
\tikzstyle{coi} = [->,color=orange!90!black,thick]
\NewDocumentCommand \coi {O{} m O{} m} {\draw[coi,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{coi}$}  (#4);}
\newcommand{\rcoi}{\ensuremath{\mathrel{\color{orange!90!black}\mathsf{coi}}}}%
\newcommand{\xcoi}{\xarrowtikz{coi}{coi}}%
\tikzstyle{coe} = [->,color=orange!90!black,thick]
\NewDocumentCommand \coe {O{} m O{} m} {\draw[coe,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{coe}$}  (#4);}
\newcommand{\rcoe}{\ensuremath{\mathrel{\color{orange!90!black}\mathsf{coe}}}}%
\newcommand{\xcoe}{\xarrowtikz{coe}{coe}}%

\tikzstyle{fr} = [->,color=red!90!black,thick]
\NewDocumentCommand \fr {O{} m O{} m} {\draw[fr,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{fr}$}  (#4);}
\newcommand{\rfr}{\ensuremath{\mathrel{\color{red!90!black}\mathsf{fr}}}}%
\newcommand{\xfr}{\xarrowtikz{fr}{fr}}%
\tikzstyle{fre} = [->,color=red!90!black,thick]
\NewDocumentCommand \fre {O{} m O{} m} {\draw[fre,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{fre}$}  (#4);}
\newcommand{\rfre}{\ensuremath{\mathrel{\color{red!90!black}\mathsf{fre}}}}%
\newcommand{\xfre}{\xarrowtikz{fre}{fre}}%
\tikzstyle{fri} = [->,color=red!90!black,thick]
\NewDocumentCommand \fri {O{} m O{} m} {\draw[fri,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{fri}$}  (#4);}
\newcommand{\rfri}{\ensuremath{\mathrel{\color{red!90!black}\mathsf{fri}}}}%
\newcommand{\xfri}{\xarrowtikz{fri}{fri}}%
%\tikzstyle{rb} = [->,thick,dotted,color=red!90!black,]
\NewDocumentCommand \rb {O{} m O{} m} {\draw[fr,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{fr}$}  (#4);}
\newcommand{\rrb}{\ensuremath{\mathrel{\color{red!90!black}\mathsf{fr}}}}%
\newcommand{\xrb}{\xarrowtikz{rb}{fr}}%

\tikzstyle{rf} = [->,thick,color=green!50!black,]
\newcommand{\rf}[3][]{\draw[rf,#1](#2)to(#3);}
\newcommand{\rrf}{\ensuremath{\mathrel{\color{green!50!black}\mathsf{rf}}}}%
\newcommand{\xrf}{\xarrowtikz{rf}{rf}}%
\tikzstyle{rfx} = [->,thick,color=green!50!black,]
\NewDocumentCommand \rfx {O{} m O{} m} {\draw[rf,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{rf}$}  (#4);}
\newcommand{\rrfx}{\ensuremath{\mathrel{\color{green!50!black}\mathsf{rf}}}}%
\newcommand{\xrfx}{\xarrowtikz{rf}{rf}}%
\tikzstyle{rfe} = [->,color=green!50!black,thick]
\NewDocumentCommand \rfe {O{} m O{} m} {\draw[rfe,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{rfe}$}  (#4);}
\newcommand{\rrfe}{\ensuremath{\mathrel{\color{green!50!black}\mathsf{rfe}}}}%
\newcommand{\xrfe}{\xarrowtikz{rfe}{rfe}}%
\tikzstyle{rfi} = [->,color=green!50!black,thick]
\NewDocumentCommand \rfi {O{} m O{} m} {\draw[rfi,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{rfi}$}  (#4);}
\newcommand{\rrfi}{\ensuremath{\mathrel{\color{green!50!black}\mathsf{rfi}}}}%
\newcommand{\xrfi}{\xarrowtikz{rfi}{rfi}}%

\tikzstyle{sw} = [->,color=blue,thick]
\NewDocumentCommand \sw {O{} m O{} m} {\draw[sw,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{sw}$}  (#4);}
\newcommand{\rsw}{\ensuremath{\mathrel{\color{blue}\mathsf{sw}}}}%
\newcommand{\xsw}{\xarrowtikz{sw}{sw}}%
\tikzstyle{obs} = [->,color=blue,thick]
\NewDocumentCommand \obs {O{} m O{} m} {\draw[obs,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{obs}$}  (#4);}
\newcommand{\robs}{\ensuremath{\mathrel{\color{blue}\mathsf{obs}}}}%
\newcommand{\xobs}{\xarrowtikz{obs}{obs}}%

\tikzstyle{hb} = [->,color=blue,thick]
\NewDocumentCommand \hb {O{} m O{} m} {\draw[hb,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{hb}$}  (#4);}
\newcommand{\rhb}{\ensuremath{\mathrel{\color{blue}\mathsf{hb}}}}%
\newcommand{\xhb}{\xarrowtikz{hb}{hb}}%
\tikzstyle{ob} = [->,color=blue,thick]
\NewDocumentCommand \ob {O{} m O{} m} {\draw[ob,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{ob}$}  (#4);}
\newcommand{\rob}{\ensuremath{\mathrel{\color{blue}\mathsf{ob}}}}%
\newcommand{\xob}{\xarrowtikz{ob}{ob}}%

% \tikzstyle{ird} = [->,thick,color=green!50!black,]
% \NewDocumentCommand \ird {O{} m O{} m} {\draw[ird,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{ird}$}  (#4);}
% \newcommand{\rird}{\ensuremath{\mathrel{\color{green!50!black}\mathsf{ird}}}}%
% \newcommand{\xird}{\xarrowtikz{ird}{ird}}%
\tikzstyle{pox} = [->,thick,color=cyan!90!black,]
\NewDocumentCommand \pox {O{} m O{} m} {\draw[pox,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{po}$}  (#4);}
\newcommand{\rpox}{\ensuremath{\mathrel{\color{cyan!90!black}\mathsf{po}}}}%
\newcommand{\xpox}{\xarrowtikz{pox}{po}}%
\tikzstyle{poloc} = [->,thick,color=cyan!90!black,]
\NewDocumentCommand \poloc {O{} m O{} m} {\draw[poloc,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{poloc}$}  (#4);}
\newcommand{\rpoloc}{\ensuremath{\mathrel{\color{cyan!90!black}\mathsf{poloc}}}}%
\newcommand{\xpoloc}{\xarrowtikz{poloc}{poloc}}%
\tikzstyle{addr} = [->,color=cyan!90!black,thick]
\NewDocumentCommand \addr {O{} m O{} m} {\draw[addr,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{addr}$}  (#4);}
\newcommand{\raddr}{\ensuremath{\mathrel{\color{cyan!90!black}\mathsf{addr}}}}%
\newcommand{\xaddr}{\xarrowtikz{addr}{addr}}%
\tikzstyle{ctrl} = [->,color=cyan!90!black,thick]
\NewDocumentCommand \ctrl {O{} m O{} m} {\draw[ctrl,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{ctrl}$}  (#4);}
\newcommand{\rctrl}{\ensuremath{\mathrel{\color{cyan!90!black}\mathsf{ctrl}}}}%
\newcommand{\xctrl}{\xarrowtikz{ctrl}{ctrl}}%
\tikzstyle{data} = [->,color=cyan!90!black,thick]
\NewDocumentCommand \data {O{} m O{} m} {\draw[data,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{data}$}  (#4);}
\newcommand{\rdata}{\ensuremath{\mathrel{\color{cyan!90!black}\mathsf{data}}}}%
\newcommand{\xdata}{\xarrowtikz{data}{data}}%
\tikzstyle{dob} = [->,thick,color=cyan!90!black,]
\NewDocumentCommand \dob {O{} m O{} m} {\draw[dob,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{dob}$}  (#4);}
\newcommand{\rdob}{\ensuremath{\mathrel{\color{cyan!90!black}\mathsf{dob}}}}%
\newcommand{\xdob}{\xarrowtikz{dob}{dob}}%
\tikzstyle{bob} = [->,thick,color=cyan!90!black,]
\NewDocumentCommand \bob {O{} m O{} m} {\draw[bob,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{bob}$}  (#4);}
\newcommand{\rbob}{\ensuremath{\mathrel{\color{cyan!90!black}\mathsf{bob}}}}%
\newcommand{\xbob}{\xarrowtikz{bob}{bob}}%
\tikzstyle{aob} = [->,thick,color=cyan!90!black,]
\NewDocumentCommand \aob {O{} m O{} m} {\draw[aob,#1](#2) to [auto,#3] node {$\scriptstyle\mathsf{aob}$}  (#4);}
\newcommand{\raob}{\ensuremath{\mathrel{\color{cyan!90!black}\mathsf{aob}}}}%
\newcommand{\xaob}{\xarrowtikz{aob}{aob}}%

\newsavebox{\mytempbox}
\newcommand{\xarrowtikz}[3][above=-0.45ex]{\sbox{\mytempbox}{\hbox{\( \scriptstyle\mathsf{#3}\mkern17mu \)}}%
  \mathrel{\smash{\tikz[baseline=-0.5ex]{\draw[#2] (0,0) -- node[midway,#1]{\(\scriptstyle\mathsf{#3}\)} (\wd\mytempbox,0);}}}}
\newcommand{\xarrowtikzlong}[3][above=-0.45ex]{\sbox{\mytempbox}{\hbox{\( \scriptstyle\mathsf{#3}\mkern17mu \)}}%
  \mathrel{\smash{\tikz[baseline=-0.5ex]{\draw[#2] (0,0) -- node[midway,#1]{\(\scriptstyle\mathsf{#3}\)} (\wd\mytempbox*1.5,0);}}}}
\newcommand{\xarrowtikzrev}[3][above=-0.45ex]{\sbox{\mytempbox}{\hbox{\( \scriptstyle\mathsf{#3}\mkern17mu \)}}%
  \mathrel{\smash{\tikz[baseline=-0.5ex]{\draw[#2] (\wd\mytempbox,0) -- node[pos=0.4,#1]{\(\scriptstyle\mathsf{#3}\)} (0,0);}}}}
\newcommand{\xarrowtikzboth}[3][above=-0.45ex]{\sbox{\mytempbox}{\hbox{\( \scriptstyle\mathsf{#3}\mkern17mu \)}}%
  \mathrel{\smash{\tikz[baseline=-0.5ex]{\draw[#2] (0,0) -- node[midway,#1]{\(\scriptstyle\mathsf{#3}\)} (\wd\mytempbox,0);
        \draw[#2] (\wd\mytempbox,0) -- (0,0);
      }}}}

\newcommand{\xarrow}[1]{\xrightarrow{\smash{#1}}}
%\newcommand{\xarrow}[1]{\xrightarrow{\raisebox{-1ex}{$\scriptstyle\smash{#1}$}}}
\newcommand{\Xarrow}[1]{\xRightarrow{#1}}



% Local Variables:
% mode: latex
% TeX-master: "paper"
% End: