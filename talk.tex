\documentclass[t,aspectratio=169]{beamer} %tlmgr install translator
%\includeonlyframes{current}  %%%% USE: \begin{frame}[label=current]
\usepackage{macros}
\usepackage{talk}
\begin{comment}
\begin{frame}
  \frametitle{}
  \begin{itemize}
  \item 
  \end{itemize}
\end{frame}
    \begin{itemize}
    \item 
    \end{itemize}

    Great Beamer guide here:
    https://www.overleaf.com/learn/latex/Beamer_Presentations:_A_Tutorial_for_Beginners_(Part_4)â€”Overlay_Specifications

To convert from PDF to KeyNOTE: use the automator suggestion here
https://apple.stackexchange.com/questions/95856/import-multiple-pages-from-a-pdf-as-separate-slides-in-keynote
I put the automator app here: https://www.dropbox.com/sh/1o36nes45cydmbx/AADPVWpeEBZj2vemVXkGKQXVa?dl=0
- Copy that to your machine somewhere.
- In the finder, drop talk.pdf onto "PDF Save Pages as Images.app".
- This will create a bunch of png files on the desktop
- Now, open keynote with a blank document.
- In the finder, select the files, drop onto the leftmost "slides" pane of Keynote.

Another display option is to use http://dspdfviewer.danny-edel.de, which requires
  \usepackage{pgfpages}
  \setbeameroption{show notes on second screen}
  You can use the keys "t" and "d" to get different things on the presenter screen

\pause
\onslide<>

\visible<>{during}                 visibleenv
\invisible<>{other}                invisibleenv

\onslide<>{during}
\uncover<>{during}                 uncoverenv

\only<>{during}                    onlyenv
\alt<>{during}{other}              altenv
\temporal<>{before}{during}{after}
\setbeamercovered{transparent=35}


\begin{itemize}[<+-| alert@+>]
\item Apple
\item Peach
\item Plum
\item Orange
\end{itemize}
\end{comment}

\title{Pomsets with Preconditions}
\subtitle{A Simple Model of Relaxed Memory}
\author{Radha Jagadeesan$^\dagger$ \and Alan Jeffrey$^*$ \and James Riely$^\dagger$}
\date{October 2020}
\institute{$^\dagger$DePaul University \and $^*$Mozilla Research and the Servo Project}

%\usepackage{pgfpages}\setbeameroption{show notes on second screen}
\setbeamertemplate{navigation symbols}{\insertframenumber/\inserttotalframenumber}
\begin{document}
\begin{frame}
  \maketitle
\end{frame}
% \begin{frame}
%   \begin{framecenter}
%     \Huge
%     Shared Memory Concurrency \\
%     \vfill
%     \uncover<2->{Transactions} %\\ to augment or replace locks} \\
%     \vfill
%     \uncover<3->{Programmer Model?}
%   \end{framecenter}
% \end{frame}

\begin{frame}
  \frametitle{Can this program write 1 to z?}
  \begin{gather*}
    y\GETS x
    \PAR
    r\GETS y\SEMI
    x\GETS r\SEMI
    z\GETS r
  \end{gather*}
  $r$ is a register\\
  $x$, $y$, $z$ are shared memory locations, initially $0$

 
  \pause
  \vspace{1in}
  what about
  \begin{gather*}
    y\GETS x
    \PAR
    r\GETS y\SEMI
    \alert{\IF{r}\THEN} x\GETS r\SEMI z\GETS r \alert{\ELSE x\GETS1 \FI}
  \end{gather*}
\end{frame}

\begin{frame}
  \frametitle{Can this program write 1 to z?}
  \begin{gather*}
    y\GETS x
    \PAR
    r\GETS y\SEMI
    \IF{r}\THEN x\GETS r\SEMI z\GETS r \ELSE x\GETS1 \FI
  \end{gather*}
  \pause
  $x$ and $y$ can only be $0$ or $1$  
  \begin{gather*}
    y\GETS x
    \PAR
    r\GETS y\SEMI
    \IF{r}\THEN x\GETS r\SEMI z\GETS 1 \ELSE x\GETS1 \FI
  \end{gather*}
  \pause
  lift common code
\begin{gather*}
  %\taglabelpp{OOTA?}
  y\GETS x
  \PAR
  r\GETS y\SEMI
  x\GETS1\SEMI
  \IF{r}\THEN z\GETS 1 \FI
\end{gather*}
  \pause
  commute independent statements
\begin{gather*}
  %\taglabelpp{OOTA?}
  y\GETS x
  \PAR
  x\GETS1\SEMI
  r\GETS y\SEMI
  \IF{r}\THEN z\GETS 1 \FI
\end{gather*}
  \pause
  interleaving
\begin{gather*}
  %\taglabelpp{OOTA?}
  x\GETS1\SEMI
  y\GETS x\SEMI
  r\GETS y\SEMI
  \IF{r}\THEN z\GETS 1 \FI
\end{gather*}
\end{frame}

\imagepage{images/abomb3.jpg}{\href{https://www.publicdomainpictures.net/en/view-image.php?image=198310}{Photo in the Public domain}}
\imagepage{images/flowers.jpg}{\href{https://www.publicdomainpictures.net/en/view-image.php?image=365530}{Photo in the Public domain}}

% \imagepage{images/katorisi.jpeg}{\href{https://commons.wikimedia.org/wiki/File:Tulips,Hitachi_Seaside_Park,Hitachinaka-city,Japan.JPG}{Photo
%   by Katorisi, 2010, Creative Commons}}


\begin{frame}
  \frametitle{Sequential Semantics}

  \begin{gather*}
    \begin{gathered}
      \only<9->{\IF{r}\THEN}
      \only<4->{x\GETS r\SEMI}
      z\GETS r
      \only<9->{\FI}
      \\
      \only<1>{\hbox{\begin{tikzinline}[node distance=.5em]
            \event{wz}{r{=}0\mid\DW{z}{0}}{}
          \end{tikzinline}}}
      \only<2>{\hbox{\begin{tikzinline}[node distance=.5em]
            \event{wz}{r{=}1\mid\DW{z}{1}}{}
          \end{tikzinline}}}
      \only<3>{\hbox{\begin{tikzinline}[node distance=.5em]
            \event{wz}{r{=}2\mid\DW{z}{2}}{}
          \end{tikzinline}}}
      \only<4>{\hbox{\begin{tikzinline}[node distance=.5em]
            \event{wz}{r{=}0\mid\DW{z}{0}}{}
            \event{wx}{r{=}0\mid\DW{x}{0}}{left=of wz}
          \end{tikzinline}}}
      \only<5,8>{\hbox{\begin{tikzinline}[node distance=.5em]
            \event{wz}{r{=}1\mid\DW{z}{1}}{}
            \event{wx}{r{=}1\mid\DW{x}{1}}{left=of wz}
          \end{tikzinline}}}
      \only<6-7>{\hbox{\begin{tikzinline}[node distance=.5em]
            \nonevent{wz}{r{=}1\mid\DW{z}{1}}{}
            \nonevent{wx}{r{=}0\mid\DW{x}{0}}{left=of wz}
          \end{tikzinline}}}
      \only<9>{\hbox{\begin{tikzinline}[node distance=.5em]
            \event{wz}{r{\neq}0 \land r{=}1\mid\DW{z}{1}}{}
            \event{wx}{r{\neq}0 \land r{=}1\mid\DW{x}{1}}{left=of wz}
          \end{tikzinline}}}
      \only<10->{\hbox{\begin{tikzinline}[node distance=.5em]
            \event{wz}{r{=}1\mid\DW{z}{1}}{}
            \event{wx}{r{=}1\mid\DW{x}{1}}{left=of wz}
          \end{tikzinline}}}
    \end{gathered}
    \only<8->{\qquad \qquad\qquad\begin{gathered}
      \only<9->{\IF{\lnot r}\THEN}
        x\GETS 1
      \only<9->{\FI}
      \\
      \only<8>{\hbox{\begin{tikzinline}[node distance=.5em]
            \event{wx}{1{=}1\mid\DW{x}{1}}{}
          \end{tikzinline}}}
      \only<9>{\hbox{\begin{tikzinline}[node distance=.5em]
            \event{wx}{r{=}0 \land 1{=}1\mid\DW{x}{1}}{}
          \end{tikzinline}}}
      \only<10->{\hbox{\begin{tikzinline}[node distance=.5em]
            \event{wx}{r{=}0\mid\DW{x}{1}}{}
          \end{tikzinline}}}
      \end{gathered}}
  \\[3ex]
  \begin{gathered}
    \only<11->{\IF{r}\THEN x\GETS r\SEMI z\GETS r \ELSE x\GETS 1\FI}
    \\
      \only<11->{\hbox{\begin{tikzinline}[node distance=.5em]
            \event{wz}{r{=}1\mid\DW{z}{1}}{}
            \event{wx}{r{=}0\lor r{=}1\mid\DW{x}{1}}{left=of wz}
          \end{tikzinline}}}    
    \end{gathered}
  \end{gather*}
  \begin{center}
    \only<7>{$r{=}0$ and $r{=}1$ are \emph{inconsistent}}
  \end{center}
\end{frame}

\begin{frame}
  \frametitle{It's going to be okay}
  \begin{itemize}[<+->]
  \item Concurrent observers see more [Plotkin and Pratt , 1990]: \emph{Teams
      Can See Pomsets}]
    \begin{itemize}
    \item compiler optimization only sound for sequential programs      
    \end{itemize}
  \item Use \emph{Sequential consistency} as correctness criterion [Lamport,
    1979]: \emph{How to Make a Multiprocessor Computer That Correctly
      Executes Multiprocess Programs}
    \begin{itemize}
    \item It's too slow
    \end{itemize}
  \item 
  \item Orange
  \end{itemize}
\end{frame}


\imagepage{images/keynote-talk/keynote-talk.001.jpeg}{}
\imagepage{images/keynote-talk/keynote-talk.002.jpeg}{}
\imagepage{images/keynote-talk/keynote-talk.003.jpeg}{}
\imagepage{images/keynote-talk/keynote-talk.004.jpeg}{}
\imagepage{images/keynote-talk/keynote-talk.005.jpeg}{}




\begin{frame}
\end{frame}
\end{document}

% Local Variables:
% mode: latex
% TeX-master: t
% End:
